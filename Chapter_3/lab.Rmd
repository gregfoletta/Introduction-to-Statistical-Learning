# Chapter 3 - Lab

Load the required libraries, and convert the the Boston data to a tibble:
```{r setup, message = FALSE}
library(tidyverse)
library(broom)
library(MASS)
library(ISLR)

boston <- as.tibble(Boston)
```

Calculate the linear regression of lstat (lower status of population) on to medv (median value of owner-occupied homes).

```{r}    
lm_boston <- lm(medv ~ lstat, boston)

lm_boston

summary(lm_boston)
confint(lm_boston)
```

We can extract some of the key variables of the regression using the `augment()` function:
```{r}
augment(lm_boston)
```

Using this, we can generate a plot with:

    * The fitted line using `geom_smooth()`.
    * The (lstat, medv) x/y points.
    * The predicted value of medv given the linear regression.
    * Segments linking the actual and predicted values of medv.


```{r medv_lstat_plot}
augment(lm_boston) %>% ggplot(aes(lstat, medv)) + 
    geom_smooth(method = 'lm') + 
    geom_point(alpha = .4) + 
    geom_point(aes(lstat, .fitted), shape = 1) + 
    geom_segment(aes(xend = lstat, yend = .fitted), alpha = .5, colour = 'grey')
```

## Predicted versus Residuals

We plot the predited values versus the residuals to get an idea if the

```{r medv_lstat_predict_versus_residuals}
augment(lm_boston) %>% ggplot(aes(.fitted, .resid)) + geom_point() + geom_smooth()
```

We can see a U shape, indicating non-linearity in the data.

## Leverage

```{r medv_lstat_leverage}
augment(lm_boston) %>% mutate(index = c(1:nrow(augment(lm_boston)))) %>% ggplot(aes(index, .hat)) + geom_point()
```






	


